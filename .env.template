# ðŸš¨ CRITICAL SECURITY VIOLATION: CREDENTIALS REMOVED
# This file contained production credentials and has been sanitized
# IMMEDIATE ACTION REQUIRED:
# 1. Rotate all exposed credentials
# 2. Move to environment-specific files (.env.local, .env.production)
# 3. Add .env to .gitignore if not already present
# 4. Use secrets management in production

# -----------------------------------------------------------------------------
# Core application & environment (URLs, domains, runtime mode)
# -----------------------------------------------------------------------------
NODE_ENV=development # Required (prod) | string: development|production|test | Used across server/client for behavior toggles
PORT=3000 # Optional (dev) | number | Local server port for Node scripts and some API handlers

FRONTEND_URL=https://www.satnam.pub # Required (prod) | URL | CORS origin for health/auth Netlify Functions
VITE_APP_DOMAIN=https://www.satnam.pub # Required (prod) | URL/origin | Browser CORS origin for auth endpoints (logout, clear-refresh-cookie)

API_BASE_URL=https://api.my.satnam.pub # Optional | URL | Server-side base URL for auth/NIP-07 handlers
VITE_API_BASE_URL=/api # Required | path or URL | Frontend API base URL used by browser clients

VITE_SATNAM_DOMAIN=satnam.pub # Optional | hostname | Marketing/frontend domain used in client config
VITE_DASHBOARD_URL=https://my.satnam.pub/dashboard # Optional | URL | Dashboard UI URL
VITE_PLATFORM_LIGHTNING_DOMAIN=my.satnam.pub # Required | hostname | Canonical NIP-05/Lightning domain for my.satnam.pub identity endpoints

FAMILY_DOMAIN=my.satnam.pub # Optional | hostname | Family federation/NIP-05 domain used on server
FAMILY_USERNAME_MAX_LENGTH=20 # Optional | integer | Max username length for family federation

COOKIE_DOMAIN=.satnam.pub # Required (prod) | hostname | Cookie domain for auth cookies (logout, clear-refresh-cookie)

# -----------------------------------------------------------------------------
# Supabase & database configuration
# -----------------------------------------------------------------------------
SUPABASE_URL=https://your-project.supabase.co # Required | URL | Supabase project URL for server-side helpers and scripts
SUPABASE_ANON_KEY=your_anon_key_here # Required | string (JWT) | Supabase anon key for RLS-protected public access
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key_here # Required (prod, server-only) | string | Supabase service role key for migrations and vault access
SUPABASE_SERVICE_KEY=your_service_role_key_here # Optional legacy alias | string | Older scripts may use this instead of SUPABASE_SERVICE_ROLE_KEY

NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co # Optional | URL | Browser-exposed Supabase URL for older tooling/tests
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key_here # Optional | string | Browser-exposed anon key for older tooling/tests

VITE_SUPABASE_URL=https://your-project.supabase.co # Required | URL | Supabase URL for browser code via Vite env
VITE_SUPABASE_ANON_KEY=your_anon_key_here # Required | string | Supabase anon key for browser Supabase client

DATABASE_URL=postgres://postgres:password@localhost:5432/identity_forge # Required (prod) | URL | Primary Postgres connection string for migrations and server utilities
DATABASE_MAX_CONNECTIONS=10 # Optional | integer | Max DB pool size for Netlify/background processes
DATABASE_HOST=localhost # Optional | hostname | DB host when not using DATABASE_URL
DATABASE_PORT=5432 # Optional | integer | DB port when not using DATABASE_URL
DATABASE_NAME=satnam # Optional | string | DB name when not using DATABASE_URL
DATABASE_USER=postgres # Optional | string | DB user when not using DATABASE_URL
DATABASE_PASSWORD=your_db_password_here # Optional | string | DB password when not using DATABASE_URL
DATABASE_SSL=false # Optional | boolean ("true"/"false") | Enable SSL for DB connections (true in production)

REDIS_URL=redis://localhost:6379 # Optional | URL | Redis connection for caching/rate limiting if enabled

# -----------------------------------------------------------------------------
# Bitcoin node / RPC integration (optional)
# -----------------------------------------------------------------------------
BITCOIN_RPC_USER=rpcuser # Optional | string | Bitcoin Core RPC username
BITCOIN_RPC_PASSWORD=change_this_rpc_password # Optional (secret) | string | Bitcoin Core RPC password
BITCOIN_RPC_HOST=127.0.0.1 # Optional | hostname | Bitcoin Core RPC host
BITCOIN_RPC_PORT=8332 # Optional | integer | Bitcoin Core RPC port

# -----------------------------------------------------------------------------
# Nostr, NIP-05, Lightning Address & relay configuration
# -----------------------------------------------------------------------------
NOSTR_RELAY_URL=wss://relay.damus.io # Optional | URL | Primary relay URL for server-initiated Nostr events
NOSTR_RELAYS=wss://relay.damus.io,wss://relay.satnam.pub # Optional | CSV of URLs | Relay list surfaced via Vite env injection
VITE_NOSTR_RELAYS=wss://relay.damus.io,wss://relay.satnam.pub # Optional | CSV of URLs | Browser relay list for Nostr features

NOSTR_PRIVATE_KEY=your_nostr_private_key_here # Optional (secret) | hex string | Private key for server-signed Nostr events
NOSTR_AUTH_CHALLENGE=satnam_auth_challenge # Optional | string | Challenge prefix for Nostr auth flows
VITE_NOSTR_AUTH_CHALLENGE=satnam_auth_challenge # Optional | string | Browser-visible challenge string for auth UI
VITE_NOSTR_AUTH_KIND=27235 # Optional | number | Custom Nostr kind used for auth events

NIP05_DOMAIN=my.satnam.pub # Required (prod) | hostname | Default NIP-05 domain for identity records
NIP05_ALLOWED_DOMAINS=my.satnam.pub # Required (prod) | CSV of hostnames | Allowed NIP-05 domains on server
VITE_NIP05_ALLOWED_DOMAINS=my.satnam.pub # Optional | CSV of hostnames | Allowed NIP-05 domains used in browser LNURL helpers

LIGHTNING_ADDRESS_DOMAIN=my.satnam.pub # Required (prod) | hostname | Domain used to construct Lightning Addresses (name@domain)
VITE_LIGHTNING_DOMAIN=my.satnam.pub # Legacy | hostname | Older client-side Lightning Address domain (still read in some flows)

VITE_NIP05_VERIFICATION_ENDPOINT=https://api.my.satnam.pub/.well-known/nostr.json # Optional | URL | Custom verification endpoint for NIP-05 checks

# -----------------------------------------------------------------------------
# Authentication, privacy, logging & core security
# -----------------------------------------------------------------------------
DUID_SERVER_SECRET=your_64_character_hex_secret_here # Required (prod, server-only) | 64-char hex | Master secret for DUID indexing and JWT derivation
DUID_SECRET_KEY=your_legacy_duid_secret_here # Optional legacy alias | string | Older DUID helpers may reference this
GLOBAL_SALT=dev-only-identifier-pepper-change-in-production # Optional (secret) | string | Fallback pepper for privacy-preserving hashes

JWT_SECRET=derived_jwt_secret_or_legacy_value # Optional (server-only) | string | JWT secret (often derived from DUID_SERVER_SECRET via helper)
JWT_EXPIRES_IN=7d # Optional | string | JWT lifetime (e.g. "7d", "24h")

PRIVACY_MASTER_KEY=dev_insecure_master_key_change_in_prod # Optional (server-only) | string >=32 chars | Master key for privacy-first crypto helpers
ENABLE_SSS=true # Optional | boolean ("true"/"false") | Enable Shamir Secret Sharing features
ENABLE_PRIVACY_MODE=true # Optional | boolean | Enable strict privacy defaults and extra checks
ENABLE_FEDERATED_SIGNING=true # Optional | boolean | Enable federated/guardian signing flows
ENABLE_GUARDIAN_NOTIFICATIONS=true # Optional | boolean | Enable guardian notification workflows
PRIVACY_AUDIT=true # Optional | boolean | Enable additional privacy audit logging
DEBUG_LOGGING=false # Optional | boolean | Coarse server-side debug logging toggle
SQL_LOGGING=false # Optional | boolean | Enable SQL query logging in development

LOG_LEVEL=info # Optional | "debug"|"info"|"warn"|"error" | Minimum log level for server logs
VITE_LOG_LEVEL=debug # Optional | "debug"|"info"|"warn"|"error" | Minimum log level for browser logging service

ENCRYPTION_KEY=dev_encryption_key_change_in_prod # Optional (secret) | string | Fallback app-level symmetric encryption key

# -----------------------------------------------------------------------------
# Lightning, LNbits, PhoenixD, Breez & NWC integration
# -----------------------------------------------------------------------------
LIGHTNING_NODE_URL=https://your-lightning-node.com # Optional | URL | LND/LN node gRPC or REST endpoint
LIGHTNING_MACAROON=your_macaroon_here # Optional (secret) | hex/base64 | Macaroon for LIGHTNING_NODE_URL
LIGHTNING_CERT_PATH=/path/to/tls.cert # Optional | filesystem path | TLS cert path for self-hosted node

VOLTAGE_NODE_ID=your_voltage_node_id # Optional | string | Voltage node identifier
VOLTAGE_API_KEY=your_voltage_api_key # Optional (secret) | string | Voltage API key
VOLTAGE_LNBITS_URL=https://your-voltage-lnbits-instance # Optional | URL | Voltage-hosted LNbits instance
VOLTAGE_LNBITS_ADMIN_KEY=your_voltage_lnbits_admin_key # Optional (secret) | string | Voltage LNbits admin key

VITE_VOLTAGE_LNBITS_URL=https://your-voltage-lnbits-instance # Optional | URL | Client-facing Voltage LNbits URL (if exposed)
VITE_VOLTAGE_LNBITS_ADMIN_KEY=your_voltage_lnbits_admin_key # Optional (secret; avoid in prod) | string | Client-side admin key (dev only)

LNBITS_BASE_URL=https://lnbits.yourdomain.com # Required when LNbits enabled | URL | Server-side LNbits base URL
LNBITS_ADMIN_KEY=your_lnbits_admin_key_here # Required (secret) | string | Primary LNbits admin key for wallet creation
LNBITS_BOOTSTRAP_ADMIN_KEY=your_bootstrap_admin_key_here # Optional (secret) | string | Fallback LNbits admin key
LNBITS_KEY_ENC_SECRET=your_lnbits_encryption_secret_here # Optional (secret) | string >=32 chars | Extra encryption secret for LNbits-related helpers
LNBITS_WEBHOOK_SECRET=your_lnbits_webhook_secret_here # Optional (secret) | string | Shared secret for LNbits webhooks

VITE_LNBITS_BASE_URL=https://lnbits.yourdomain.com # Optional | URL | Browser LNbits base URL (used when LNbits integration is enabled)
VITE_LNBITS_INTEGRATION_ENABLED=false # Optional | boolean | Master flag for LNbits integration in UI and Netlify functions

PHOENIXD_NODE_URL=https://phoenixd.yourdomain.com # Optional | URL | PhoenixD node URL used in lightning configuration
PHOENIXD_MACAROON=your_phoenixd_macaroon_hex_here # Optional (secret) | string | PhoenixD macaroon for authenticated calls
PHOENIXD_API_URL=http://127.0.0.1:9740 # Optional | URL | PhoenixD REST API URL used by env.server.ts helpers
PHOENIXD_API_PASSWORD=your_phoenixd_api_password_here # Optional (secret) | string | PhoenixD API password

BREEZ_NODE_CONFIG=base64_or_json_config_here # Optional | string | Breez node configuration blob (if using Breez integration)
NWC_CONNECTION_STRINGS=nwc1example1,nwc1example2 # Optional | CSV | Nostr Wallet Connect connection strings

# -----------------------------------------------------------------------------
# LNProxy privacy routing
# -----------------------------------------------------------------------------
VITE_LNPROXY_URL=https://lnproxy.org # Optional | URL | Browser LNProxy service URL for privacy-preserving Lightning payments
LNPROXY_URL=https://lnproxy.org # Optional | URL | Server-side LNProxy URL for Netlify privacy function

# -----------------------------------------------------------------------------
# SimpleProof / OpenTimestamps attestation & monitoring
# NOTE: Identity Forge uses OpenTimestamps (OTS) as the primary Bitcoin timestamp provider by default.
#       Remote SimpleProof API usage is OPTIONAL and must be explicitly enabled server-side.
# -----------------------------------------------------------------------------
VITE_SIMPLEPROOF_ENABLED=false # Optional | boolean | Enable Identity Forge timestamp verification UI (OpenTimestamps-based, no remote SimpleProof API calls)
VITE_SIMPLEPROOF_API_KEY=your_simpleproof_api_key_here # Optional | secret string | SimpleProof API key for future premium remote timestamping flows (server-side only)
VITE_SIMPLEPROOF_API_URL=https://api.simpleproof.com # Optional | URL | SimpleProof API base URL when remote provider is enabled
VITE_SIMPLEPROOF_FEE_WARNINGS_ENABLED=true # Optional | boolean | Show fee warning modals when remote SimpleProof premium flows are enabled
SIMPLEPROOF_REMOTE_ENABLED=false # Optional | boolean | SERVER-SIDE ONLY: when true AND clients explicitly request provider="simpleproof", Netlify functions will call SimpleProof's API and bill YOUR SimpleProof account. Leave false for OpenTimestamps-only flows.

VITE_SENTRY_ENABLED=false # Optional | boolean | Enable Sentry error reporting in browser
VITE_SENTRY_DSN=https://examplePublicKey@o00000.ingest.sentry.io/000000 # Optional | URL | Sentry DSN for client error tracking
VITE_SENTRY_ORG=satnam-pub # Optional | string | Sentry organization slug for build-time upload
VITE_SENTRY_PROJECT=satnam-pub # Optional | string | Sentry project slug for build-time upload
SENTRY_AUTH_TOKEN=your_sentry_auth_token_here # Required for production Sentry uploads (secret) | string | Auth token for sentryVitePlugin

# -----------------------------------------------------------------------------
# Pubky / PKARR configuration (server and client)
# -----------------------------------------------------------------------------
PUBKY_HOMESERVER_URL=https://pubky.app # Optional | URL | Server-side Pubky homeserver
PUBKY_PKARR_RELAYS=wss://relay1.example.com,wss://relay2.example.com # Optional | CSV | PKARR relay list on server
PUBKY_ENABLE_MIGRATION=true # Optional | boolean | Enable Pubky migration logic on server
PUBKY_SOVEREIGNTY_TRACKING=true # Optional | boolean | Enable sovereignty metrics on server

PKARR_RELAY_TIMEOUT=5000 # Optional | integer (ms) | Server PKARR relay timeout
PKARR_RECORD_TTL=3600 # Optional | integer (seconds) | PKARR record TTL on server
PKARR_BACKUP_RELAYS=3 # Optional | integer | Number of backup relays
PKARR_PUBLISH_RETRIES=3 # Optional | integer | Publish retry count

VITE_PUBKY_HOMESERVER_URL=https://pubky.app # Optional | URL | Browser Pubky homeserver
VITE_PKARR_RELAYS=wss://relay1.example.com,wss://relay2.example.com # Optional | CSV | Browser PKARR relay list
VITE_PUBKY_ENABLE_MIGRATION=true # Optional | boolean | Enable Pubky migration features in UI
VITE_PUBKY_SOVEREIGNTY_TRACKING=true # Optional | boolean | Enable sovereignty tracking UI

VITE_PKARR_RELAY_TIMEOUT=5000 # Optional | integer (ms) | Browser PKARR relay timeout
VITE_PKARR_RECORD_TTL=3600 # Optional | integer (seconds) | Browser PKARR record TTL
VITE_PKARR_BACKUP_RELAYS=3 # Optional | integer | Number of backup relays (browser)
VITE_PKARR_PUBLISH_RETRIES=3 # Optional | integer | Publish retry count (browser)

VITE_IROH_ENABLED=false # Optional | boolean | Enable Iroh-based decentralized verification features
VITE_PKARR_ENABLED=false # Optional | boolean | Master toggle for PKARR-based features in UI

# -----------------------------------------------------------------------------
# NIP-85 caching, messaging & relay health (KeyChat / messaging features)
# -----------------------------------------------------------------------------
VITE_NIP85_PRIMARY_RELAY=wss://relay.satnam.pub # Optional | URL | Primary relay for NIP-85 caching
VITE_NIP85_CACHE_TTL_MS=300000 # Optional | integer (ms) | Cache TTL for NIP-85 responses
VITE_NIP85_DEFAULT_EXPOSURE_LEVEL=private # Optional | "public"|"contacts"|"whitelist"|"private" | Default exposure level for cached data
VITE_NIP85_CACHE_ENABLED=true # Optional | boolean | Enable NIP-85 cache
VITE_NIP85_AUDIT_LOGGING_ENABLED=true # Optional | boolean | Enable NIP-85 audit logging

VITE_MESSAGE_REACTIONS_ENABLED=true # Optional | boolean | Enable NIP-25 reaction features in messaging
VITE_MULTIMEDIA_MESSAGING_ENABLED=false # Optional | boolean | Enable multimedia messaging support
VITE_MESSAGE_SEARCH_ENABLED=true # Optional | boolean | Enable message search features
VITE_RELAY_HEALTH_MONITORING=true # Optional | boolean | Enable relay health monitoring
VITE_CASHU_RELAY_PAYMENT_ENABLED=false # Optional | boolean | Enable Cashu relay payment flows
VITE_ENHANCED_RELAY_DISCOVERY=true # Optional | boolean | Enable enhanced relay discovery features

# -----------------------------------------------------------------------------
# Federation, WebAuthn, hybrid identity & advanced feature flags
# -----------------------------------------------------------------------------
VITE_LNBITS_INTEGRATION_ENABLED=false # Optional | boolean | Master flag for LNbits integration (UI + functions)
VITE_ENABLE_AMBER_SIGNING=false # Optional | boolean | Enable Amber Android signer integration (NIP-46/NIP-55)
VITE_ENABLE_AMBER_NIP55=true # Optional | boolean | Prefer NIP-55 Android intent flow when Amber is available
VITE_AMBER_PACKAGE_NAME=com.greenart.amber # Optional | string | Allowed Amber Android package name
VITE_AMBER_INTENT_SCHEME=nostrsigner # Optional | string | Intent scheme used for Amber NIP-55 integration
VITE_AMBER_CALLBACK_URL=https://www.satnam.pub/amber-intent-callback # Optional | URL | Callback URL for Amber NIP-55 responses

VITE_HYBRID_IDENTITY_ENABLED=false # Optional | boolean | Enable hybrid NIP-05 identity verification (kind0 â†’ PKARR â†’ DNS)
VITE_NIP03_ENABLED=false # Optional | boolean | Enable NIP-03 OpenTimestamps attestations
VITE_NIP03_IDENTITY_CREATION_ENABLED=false # Optional | boolean | Allow identity creation via NIP-03 attestations
VITE_PUBLIC_PROFILES_ENABLED=false # Optional | boolean | Enable public profile discovery features

VITE_RELAY_PRIVACY_ENABLED=true # Optional | boolean | Enforce privacy-preserving relay defaults
VITE_TOKEN_BINDING_ENABLED=true # Optional | boolean | Enable token binding/anti-replay protections
VITE_TIMING_AUDIT_ENABLED=true # Optional | boolean | Enable timing-based audit/monitoring
VITE_HIERARCHICAL_ADMIN_ENABLED=true # Optional | boolean | Enable hierarchical admin controls
VITE_BYPASS_CODE_ENABLED=false # Optional | boolean | Enable backup bypass code authentication
VITE_RECOVERY_CODE_ENABLED=true # Optional | boolean | Enable recovery code workflows
VITE_ADMIN_AUDIT_LOG_ENABLED=true # Optional | boolean | Enable admin audit logging features
VITE_WEBAUTHN_ENABLED=false # Optional | boolean | Enable WebAuthn/Passkey authentication in UI

VITE_FEDERATION_DEFAULT_ROLE=offspring # Optional | "private"|"offspring"|"adult"|"steward"|"guardian" | Default Master Context role for new federation members
VITE_FEDERATION_APPROVAL_THRESHOLD=25000 # Optional | integer | Minimum sats or score threshold for federation approvals

VITE_ENABLE_DEBUG_LOGS=false # Optional | boolean | Enable extra debug logs in browser
VITE_MOCK_SERVICES=false # Optional | boolean | Use mocked services in development

# -----------------------------------------------------------------------------
# NFC, Tapsigner & hardware security keys
# -----------------------------------------------------------------------------
VITE_ENABLE_NFC_MFA=false # Optional | boolean | Enable NFC-based multi-factor authentication flows
VITE_NFC_PIN_TIMEOUT=300000 # Optional | integer (ms) | PIN timeout for NFC-based MFA
VITE_NFC_CONFIRMATION_MODE=per_unlock # Optional | "per_unlock"|"per_operation" | NFC confirmation policy
VITE_NFC_DEFAULT_PROGRAM_URL=https://my.satnam.pub/nfc # Optional | URL | Default URL programmed into NTAG424 cards

VITE_TAPSIGNER_DEBUG=false # Optional | boolean | Enable verbose debug logging for Tapsigner operations

# -----------------------------------------------------------------------------
# Emergency recovery & guardian consensus
# -----------------------------------------------------------------------------
EMERGENCY_RECOVERY_ENABLED=false # Optional | boolean | Master toggle for emergency recovery system
EMERGENCY_RECOVERY_MAX_ATTEMPTS=3 # Optional | integer | Max recovery attempts before lockout
GUARDIAN_CONSENSUS_THRESHOLD=2 # Optional | integer | Number of guardian approvals required for recovery
RECOVERY_METHOD_PASSWORD=true # Optional | boolean | Allow password-based recovery method
RECOVERY_METHOD_SHAMIR=true # Optional | boolean | Allow Shamir Secret Sharing recovery method
RECOVERY_METHOD_MULTISIG=false # Optional | boolean | Allow multisig-based recovery method
RECOVERY_METHOD_GUARDIAN=true # Optional | boolean | Allow guardian-consensus recovery method
RECOVERY_EXPIRATION_HOURS=24 # Optional | integer | Number of hours before a recovery window expires
